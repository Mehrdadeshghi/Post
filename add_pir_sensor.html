<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Add PIR Sensor</title>
  <script>
    function fetchPorts() {
      const hostname = document.getElementById('rp_hostname').value;
      fetch(`/get_ports/${hostname}`)
        .then(response => response.json())
        .then(data => {
          const portsDropdown = document.getElementById('port');
          portsDropdown.innerHTML = '<option value="">Select Port</option>';
          data.forEach(port => {
            const option = document.createElement('option');
            option.value = port;
            option.textContent = port;
            portsDropdown.appendChild(option);
          });
        });
    }
  </script>
</head>
<body>
  <h1>Add PIR Sensor</h1>
  <form method="post">
    <label for="rp_hostname">RP Hostname</label>
    <select id="rp_hostname" name="rp_hostname" onchange="fetchPorts()">
      <option value="">Select RP Hostname</option>
      {% for rp in rps %}
        <option value="{{ rp.hostname }}">{{ rp.hostname }}</option>
      {% endfor %}
    </select><br>
    <label for="sensor_number">Sensor Number</label>
    <input type="text" id="sensor_number" name="sensor_number"><br>
    <label for="postbox_number">Postbox Number</label>
    <input type="text" id="postbox_number" name="postbox_number"><br>
    <label for="port">Port</label>
    <select id="port" name="port">
      <option value="">Select Port</option>
    </select><br>
    <input type="submit" value="Add PIR Sensor">
  </form>
</body>
</html>
